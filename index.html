<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<meta name="description" content="Quiz for learning Japanese kanji and Chinese hanzi">
<link href="_css/style.css" rel="stylesheet" type="text/css">
<link href="_css/cjkquiz.css" rel="stylesheet" type="text/css">
<title>CJKQuiz</title>
<style>
</style>
<script>
function setZh()
{
	var k,kmax,p;
	var listJa=document.querySelectorAll(".selector.ja");
	var listZh=document.querySelectorAll(".selector.zh");
	var flagJa=document.querySelector(".flag.ja");
	var flagZh=document.querySelector(".flag.zh");
	kmax=listZh.length;
	for(k=0;k<kmax;k++) listZh[k].style.display="block";
	kmax=listJa.length;
	for(k=0;k<kmax;k++) listJa[k].style.display="none";
	flagJa.style.display="none";
	flagZh.style.display="inline-block";
	p=cjkq.getParams();
	p.sourceLang="zh";
	cjkq.setParams(p);
}
function setJa()
{
	var k,kmax,p;
	var listJa=document.querySelectorAll(".selector.ja");
	var listZh=document.querySelectorAll(".selector.zh");
	var flagJa=document.querySelector(".flag.ja");
	var flagZh=document.querySelector(".flag.zh");
	kmax=listZh.length;
	for(k=0;k<kmax;k++) listZh[k].style.display="none";
	kmax=listJa.length;
	for(k=0;k<kmax;k++) listJa[k].style.display="block";
	flagJa.style.display="inline-block";
	flagZh.style.display="none";
	p=cjkq.getParams();
	p.sourceLang="ja";
	cjkq.setParams(p);
}
function setEn()
{
	var p;
	var flagEn=document.querySelector(".flag.en");
	var flagFr=document.querySelector(".flag.fr");
	var settingsIcon=document.querySelector(".settingsIcon");
	var reorderIcon=document.querySelector(".reorderIcon");
	flagEn.style.display="inline-block";
	flagFr.style.display="none";
	settingsIcon.setAttribute("title","Settings");
	reorderIcon.setAttribute("title","Reorder/Unorder");
	p=cjkq.getParams();
	p.targetLang="en";
	cjkq.setParams(p);
}
function setFr()
{
	var p;
	var flagEn=document.querySelector(".flag.en");
	var flagFr=document.querySelector(".flag.fr");
	var settingsIcon=document.querySelector(".settingsIcon");
	var reorderIcon=document.querySelector(".reorderIcon");
	flagEn.style.display="none";
	flagFr.style.display="inline-block";
	settingsIcon.setAttribute("title","Paramétrage");
	reorderIcon.setAttribute("title","Réordonner/Mélanger");
	p=cjkq.getParams();
	p.targetLang="fr";
	cjkq.setParams(p);
}
function doOKSettings()
{
	var e=document.querySelector(".settingsDialog"),p;
	p=cjkq.getParams();
	p.kmax=e.querySelector('.numOfChars').value;
	p.timePerChar=e.querySelector('.timePerChar').value;
	p.reorderAtEnd=e.querySelector('.reorderAtEnd').checked?"1":"0";
	cjkq.setParams(p);
	cjkq.start('');
}
function doSettings()
{
	var e;
	e=document.querySelector(".settingsDialog");
	if(!e)
	{
		let s,a,b,c,p;
		e=document.createElement('dialog');
		e.classList.add("settingsDialog");
		s="<form method='dialog'>";
		s+="<h1>CJKQuiz</h1>";
		a=(cjkq.params.targetLang=="fr")?"Réordonner à la fin":"Reorder at end";
		s+="<label><input class='reorderAtEnd' type='checkbox'><span>"+a+"</span></label>";
		b=(cjkq.params.targetLang=="fr")?"Nombre de caractères :":"Number of chars:";
		s+="<label><span>"+b+"</span><input class='numOfChars' type='number' min='1' max='30'></label>";
		c=(cjkq.params.targetLang=="fr")?"Temps par caractère :":"Time per char:";
		s+="<label><span>"+c+"</span><input class='timePerChar' type='number' min='1' max='30'></label>";
		s+="<button value='OK'>OK</button>";
		s+="<button value='cancel'>"+((cjkq.params.targetLang=="fr")?"Annuler":"Cancel")+"</button>";
		s+="</form>";
		e.innerHTML=s;
		e.addEventListener('close',function()
			{
				if(this.returnValue=="OK") doOKSettings();
			});
		p=document.querySelector(".cjkq .pad");
		p.after(e);
	}
	e.querySelector('.reorderAtEnd').checked=(cjkq.params.reorderAtEnd=="1")?" checked":0;
	e.querySelector('.numOfChars').value=cjkq.params.kmax;
	e.querySelector('.timePerChar').value=cjkq.params.timePerChar;
	e.showModal();
}
function doReorder()
{
	if(cjkq.reordered) cjkq.unorder();
	else cjkq.reorder();
}
</script>
</head>
<body>
<main>
<ul class="selector settings">
<li class="flag zh"><button onclick="setJa();cjkq.start('');"><img alt="中国国旗" src="_img/chn23.svg" width="48" height="32"></button></li>
<li class="flag ja"><button onclick="setZh();cjkq.start('');"><img alt="日本の国旗" src="_img/jap23.svg" width="48" height="32"></button></li>
<li class="icon"><button onclick="doSettings();"><img class="settingsIcon" alt="Settings" title="Settings" src="_img/settings.svg" width="32" height="32"></button></li>
<li class="icon"><button onclick="doReorder()"><img class="reorderIcon" alt="Reorder" title="Reorder" src="_img/reorder.svg" width="32" height="32"></button></li>
<li class="flag en"><button onclick="setFr();cjkq.start('');"><img alt="British flag" src="_img/gbr23.svg" width="48" height="32"></button></li>
<li class="flag fr"><button onclick="setEn();cjkq.start('');"><img alt="Drapeau français" src="_img/fra23.svg" width="48" height="32"></button></li>
</ul>
<ul class="selector ja">
	<!--<li><button onclick="cjkq.start('TestJa');">Test</button></li>-->
	<li><button onclick="cjkq.start('G1');">1</button></li>
	<li><button onclick="cjkq.start('G2');">2</button></li>
	<li><button onclick="cjkq.start('G3');">3</button></li>
	<li><button onclick="cjkq.start('G4');">4</button></li>
	<li><button onclick="cjkq.start('G5');">5</button></li>
	<li><button onclick="cjkq.start('G6');">6</button></li>
	<li><button onclick="cjkq.start('G7');">7</button></li>
	<li><button onclick="cjkq.start('G8');">8</button></li>
</ul>
<!--
<ul class="selector zh">
	<li><button onclick="cjkq.start('HSK1');">HSK1</button></li>
	<li><button onclick="cjkq.start('HSK2');">HSK2</button></li>
	<li><button onclick="cjkq.start('HSK3');">HSK3</button></li>
	<li><button onclick="cjkq.start('HSK4');">HSK4</button></li>
	<li><button onclick="cjkq.start('HSK5');">HSK5</button></li>
	<li><button onclick="cjkq.start('HSK6');">HSK6</button></li>
</ul>
-->
<ul class="selector zh">
	<!--<li><button onclick="cjkq.start('TestZh');">Test</button></li>-->
	<li><button onclick="cjkq.start('NHSK1');">1</button></li>
	<li><button onclick="cjkq.start('NHSK2');">2</button></li>
	<li><button onclick="cjkq.start('NHSK3');">3</button></li>
	<li><button onclick="cjkq.start('NHSK4');">4</button></li>
	<li><button onclick="cjkq.start('NHSK5');">5</button></li>
	<li><button onclick="cjkq.start('NHSK6');">6</button></li>
	<li><button onclick="cjkq.start('NHSK7');">7</button></li>
	<li><button onclick="cjkq.start('NHSK8');">8</button></li>
	<li><button onclick="cjkq.start('NHSK9');">9</button></li>
</ul>
<script src="cjkquiz.js"></script>
<script>
window.addEventListener("load",function()
	{
		let p=cjkq.getParams();
		if(p.sourceLang=="zh") setZh();
		else setJa();
		if(p.targetLang=="En") setEn();
		else setFr();
		cjkq.start();
	}
);
</script>
</main>
</body>
</html>